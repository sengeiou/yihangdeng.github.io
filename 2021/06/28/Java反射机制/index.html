<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="yhd">
    
    <title>
        
            Java反射机制 |
        
        DyhBlog
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/MyLogo.svg">
    
<link rel="stylesheet" href="/css/font-awesome.min.css">

    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"yoursite.com","root":"/","language":"en","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":false,"init_open":true},"style":{"primary_color":"#0066CC","avatar":"/images/avatar.jpg","favicon":"/images/MyLogo.svg","article_img_align":"left","left_side_width":"230px","content_max_width":"920px","hover":{"shadow":false,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.jpeg"},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":true}}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"default"},"pjax":{"enable":false},"lazyload":{"enable":true},"version":"3.4.1"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
<meta name="generator" content="Hexo 5.1.1"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            <a class="logo-title" href="/">
                DyhBlog
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                HOME
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                ARCHIVES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                TAGS
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">ARCHIVES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">TAGS</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">Java反射机制</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.jpg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">yhd</span>
                        
                            <span class="author-label">Lv4</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;2021-06-28 09:20:34
    </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/JavaSE/">JavaSE</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>8.9k Words</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fas fa-clock"></i>&nbsp;<span>36 Mins</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <p><strong>引言</strong>：本章主要说明Java反射相关的知识。其中包含Java反射机制概述、Class类及其获取实例操作、类的加载与ClassLoader的理解、创建运行时类的对象、获取运行时类的完整结构、调用运行时类的指定结构以及反射常见应用，动态代理。</p>
<h1 id="反射的概述">反射的概述</h1>
<h2 id="基本概念">基本概念</h2>
<ul>
<li><strong>Reflection</strong>（反射）是被视为动态语言的关键，反射机制允许<strong>程序在执行期</strong>借助于Reflection API取得任何类的内部信息，并能直接<strong>操作任意对象的内部属性及方法</strong>。</li>
<li>加载完类之后，在堆内存的方法区中就<strong>产生了一个Class类型的对象</strong>（一个类只有一个Class对象），这个对象就包含了完整的类的结构信息。可以通过这个对象看到类的结构。这个对象就像一面镜子，透过这个镜子看 到类的结构，所以，我们形象的称之为：反射。</li>
<li><strong>反射其动态性在于，进行编译时不确定的类的相关操作</strong></li>
</ul>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://gitee.com/yihangdeng/blogImage/raw/master/img/20210619100353.png"
                      alt=""
                ></p>
<h2 id="反射提供功能">反射提供功能</h2>
<p><strong>tips</strong>：强调“<strong>任意一个</strong>”主要突出<strong>私有的结构</strong>都可以被反射使用</p>
<ul>
<li>在运行时<strong>判断</strong>任意一个<strong>对象所属的类</strong></li>
<li>在运行时<strong>创建</strong>任意一个<strong>类的对象</strong></li>
<li>在运行时<strong>判断</strong>任意一个类所具有的成员变量和方法</li>
<li>在运行时<strong>获取泛型信息</strong></li>
<li>在运行时<strong>调用</strong>任意一个对象的<strong>成员变量和方法</strong></li>
<li>在运行时<strong>处理注解</strong></li>
<li><strong>生成动态代理</strong></li>
<li>…</li>
</ul>
<h2 id="反射相关API">反射相关API</h2>
<ul>
<li><strong>java.lang.Class</strong>：代表一个类</li>
<li>java.<strong>lang</strong>.<strong>reflect</strong>.Method：代表类的方法</li>
<li>java.<strong>lang</strong>.<strong>reflect</strong>.Field：代表类的成员变量</li>
<li>java.<strong>lang</strong>.<strong>reflect</strong>.Constructor：代表类的构造器</li>
<li>……</li>
</ul>
<h2 id="反射动态性体现">反射动态性体现</h2>
<ul>
<li><strong>反射其动态性在于，进行编译时不确定的类的相关操作</strong></li>
<li>如下示例代码，在编译使其是无法确认最终加载的类是什么，这就是反射的动态性</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//体会反射的动态性</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="number">100</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> num = <span class="keyword">new</span> Random().nextInt(<span class="number">3</span>);<span class="comment">//0,1,2</span></span><br><span class="line">        String classPath = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">switch</span>(num)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                classPath = <span class="string">&quot;java.util.Date&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                classPath = <span class="string">&quot;java.lang.Object&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                classPath = <span class="string">&quot;com.atguigu.java.Person&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Object obj = getInstance(classPath);</span><br><span class="line">            System.out.println(obj);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    创建一个指定类的对象。</span></span><br><span class="line"><span class="comment">    classPath:指定类的全类名</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">getInstance</span><span class="params">(String classPath)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    Class clazz =  Class.forName(classPath);</span><br><span class="line">    <span class="keyword">return</span> clazz.newInstance();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="动态与静态语言">动态与静态语言</h2>
<h3 id="动态语言">动态语言</h3>
<ul>
<li>
<p>在<strong>运行时</strong>代码可以<strong>根据某些条件改变自身结构</strong>。</p>
</li>
<li>
<p>主要动态语言：<strong>Object-C、C#、JavaScript、PHP、Python、Erlang</strong></p>
</li>
</ul>
<h3 id="静态语言">静态语言</h3>
<ul>
<li>静态语言与动态语言相对应的，<strong>运行时结构不可变</strong>的语言就是静态语言</li>
<li>如：<strong>Java、C、 C++</strong></li>
</ul>
<blockquote>
<p>Java<strong>不是动态语言</strong>，但Java可以称之为“<strong>准动态语言</strong>”。即Java<strong>有一定的动态性</strong>，我们可以<strong>利用反射机制</strong>、字节码操作获得类似动态语言的特性。 Java的动态性让编程的时候更加灵活！</p>
</blockquote>
<h1 id="Class类">Class类</h1>
<h2 id="概述">概述</h2>
<ul>
<li><strong>Class类是描述类的结构的类，用与封装某一个类的结构</strong>，因此每一个类只对应一个Class实例
<ul>
<li>如果需要得知这个类的结构/类的类型，即传入一个Class类对象即可</li>
</ul>
</li>
<li>如封装和记录指定类有什么属性、方法、构造器及其权限、泛型信息、注解信息等等一切关于类的信息。</li>
<li>在Java反射机制API中将类的每一个结构，如属性、方法、构造器都有<strong>对应的一个封装类进行描述和操作</strong>
<ul>
<li>如用于描述和操作<strong>构造器</strong>的<strong>Constructor</strong>封装类，得到该对象后可以通过调用<code>newInstance()方法</code>进行构造器的对象实例化。</li>
<li><strong>属性</strong>对应的描述封装类就是<strong>Field</strong>，可以进行设置操作，也可以进行读取操作</li>
</ul>
</li>
<li><strong>Class类提供获取类所有结构对应的封装类对象实例的方法</strong>，如<code>getConstructor()</code>方法返回Constructor实例</li>
<li><strong>Class类还是一个泛型类，通过指定泛型，可以更加明确要操作的类的类型，强烈建议使用</strong>。</li>
</ul>
<h2 id="获取Class实例">获取Class实例</h2>
<p><strong>获取运行时类Class实例的4种方式</strong></p>
<ol>
<li>
<p>调用运行时类对应的<strong>类的class静态属性</strong>获取</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class&lt;Person&gt; clazz = Person.class;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>通过运行时类对应的<strong>类的实例对象调用getClass</strong>()<strong>方法</strong>获取</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Person person = <span class="keyword">new</span> Person(<span class="string">&quot;Priscilla&quot;</span>,<span class="number">23</span>);</span><br><span class="line">Class&lt;? extends Person&gt; clazz = person.getClass();</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>最常用</strong>：调用<strong>Class类的静态方法forName</strong>(String className)，传入<strong>全类名</strong>进行获取</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class&lt;?&gt; clazz3 = Class.forName(<span class="string">&quot;com.website.java.Person&quot;</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>能更好体现反射的动态性</li>
</ul>
</li>
<li>
<p>获取类加载器ClassLoader(一般使用当前操作所在类的类加载器)，的loadClass(String className)方法，<strong>显式地加载某一个类，使其返回运行时类的Class实例</strong>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ClassLoader classLoader = ClassTest.class.getClassLoader();</span><br><span class="line">Class&lt;?&gt; clazz4 = classLoader.loadClass(<span class="string">&quot;com.website.java.Person&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="示例代码">示例代码</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.website.java;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yhd</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2021-06-19 11:08</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException </span>&#123;</span><br><span class="line">        <span class="comment">//方式1：类.class静态属性</span></span><br><span class="line">        Class&lt;Person&gt; clazz1 = Person.class;</span><br><span class="line">        System.out.println(<span class="string">&quot;clazz1 = &quot;</span> + clazz1);<span class="comment">//class com.website.java.Person</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//方式2：类的对象.getClass()</span></span><br><span class="line">        Person person = <span class="keyword">new</span> Person(<span class="string">&quot;Priscilla&quot;</span>,<span class="number">23</span>);</span><br><span class="line">        Class&lt;? extends Person&gt; clazz2 = person.getClass();</span><br><span class="line">        System.out.println(<span class="string">&quot;clazz2 = &quot;</span> + clazz2);<span class="comment">//class com.website.java.Person</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//方式3：Class.forName(String classAllName); 静态方法</span></span><br><span class="line">        Class&lt;?&gt; clazz3 = Class.forName(<span class="string">&quot;com.website.java.Person&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;clazz3 = &quot;</span> + clazz3);<span class="comment">//class com.website.java.Person</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//方式4：任意获取一个类加载器，通过该加载器加载一遍指定类，获取其运行时类</span></span><br><span class="line">        <span class="comment">//为了能顺利获取到类加载器，一般使用当前代码执行所在类去获取其加载器</span></span><br><span class="line">        ClassLoader classLoader = ClassTest.class.getClassLoader();</span><br><span class="line">        Class&lt;?&gt; clazz4 = classLoader.loadClass(<span class="string">&quot;com.website.java.Person&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;clazz4 = &quot;</span> + clazz4);<span class="comment">//class com.website.java.Person</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//最后验证某一个类在JVM中只会加载一份运行时类，即Class实例</span></span><br><span class="line">        System.out.println(clazz1 == clazz2);<span class="comment">//true</span></span><br><span class="line">        System.out.println(clazz2 == clazz3);<span class="comment">//true</span></span><br><span class="line">        System.out.println(clazz3 == clazz4);<span class="comment">//true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Class实例类型">Class实例类型</h2>
<p><strong>以下类型都看作一种结构</strong>，编译运行后<strong>都具有自己对应的Class实例</strong>，封装这些<strong>结构的信息</strong></p>
<ol>
<li><strong>class</strong>： 广义上的累，如外部类，成员(成员内部类，静态内部类)，局部内部类，匿名内部类</li>
<li><strong>interface</strong>：接口</li>
<li><strong>[]</strong>：数组</li>
<li><strong>enum</strong>：枚举</li>
<li><strong>annotation</strong>：注解@interface</li>
<li><strong>primitive type</strong>：基本数据类型</li>
<li><strong>void</strong>：无返回值类型</li>
</ol>
<h3 id="示例代码-2">示例代码</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Class c1 = Object.class;//普通类</span><br><span class="line">    Class c2 = Comparable.class;//接口</span><br><span class="line">    Class c3 = String[].class;//数组</span><br><span class="line">    Class c4 = <span class="keyword">int</span>[][].class;//二维数组</span><br><span class="line">    Class c5 = ElementType.class;//枚举类</span><br><span class="line">    Class c6 = Override.class;//注解</span><br><span class="line">    Class c7 = <span class="keyword">int</span>.class;//基本数据类型</span><br><span class="line">    Class c8 = <span class="keyword">void</span>.class;//无返回值类型</span><br><span class="line">    Class c9 = Class.class;//Class本身</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//问题：c10和c11的Class实例是否一致</span></span><br><span class="line">    <span class="keyword">int</span>[] a = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">int</span>[] b = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">100</span>];</span><br><span class="line">    Class c10 = a.getClass();</span><br><span class="line">    Class c11 = b.getClass();</span><br><span class="line">    <span class="comment">//答：只要元素类型与维度一样，就是同一个Class</span></span><br><span class="line">    System.out.println(c10 == c11);<span class="comment">//true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Class类常用API">Class类常用API</h2>
<ul>
<li>常用API</li>
</ul>
<table>
<thead>
<tr>
<th>Method</th>
<th>Descriptions</th>
</tr>
</thead>
<tbody>
<tr>
<td>static Class <strong>forName</strong>(String name)</td>
<td>返回指定类名 name 的 Class 对象</td>
</tr>
<tr>
<td>Object <strong>newInstance</strong>()</td>
<td>调用<strong>默认空参构造函数</strong>，返回该Class对象的一个实例</td>
</tr>
<tr>
<td>String <strong>getName</strong>()</td>
<td>返回此Class对象所表示的实体（类、接口、数组类、基本类型 或void）名称</td>
</tr>
<tr>
<td>Class <strong>getSuperClass</strong>()</td>
<td>返回当前Class对象的父类的Class对象</td>
</tr>
<tr>
<td>Class [] <strong>getInterfaces</strong>()</td>
<td>获取当前Class对象的接口</td>
</tr>
<tr>
<td>ClassLoader <strong>getClassLoader</strong>()</td>
<td>返回该类的类加载器</td>
</tr>
<tr>
<td>Class <strong>getSuperclass</strong>()</td>
<td>返回表示此Class所表示的实体的超类的Class</td>
</tr>
<tr>
<td>Constructor[] <strong>getConstructors</strong>()</td>
<td>返回一个包含某些Constructor对象的数组</td>
</tr>
<tr>
<td>Field[] <strong>getDeclaredFields</strong>()</td>
<td>获取当前运行时类自己定义的属性</td>
</tr>
<tr>
<td>Method <strong>getMethod</strong>(String  name,Class … paramTypes)</td>
<td>返回一个Method对象，此对象的形参类型为paramType</td>
</tr>
<tr>
<td>…</td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="反射使用逻辑">反射使用逻辑</h1>
<ol>
<li>定位反射操作对应的结构封装类</li>
<li>通过Class对象方法，获取相关反射操作对应的负责的封装类对象</li>
<li>通过类结构的某个封装类对象的方法进行相关结构的反射操作</li>
</ol>
<hr>
<ol>
<li>
<p>获取反射操作的类的Class对象，无论什么反射操作，只要涉及反射就<strong>必须先获取Class对象</strong></p>
<ul>
<li>如<code>Class&lt;Person&gt; clazz =  Person.class;</code></li>
</ul>
</li>
<li>
<p>确定<strong>反射操作的对应的结构封装类</strong>，并通过<strong>Class实例的getXxxx</strong>()<strong>方法</strong>获<strong>取该结构的封装类</strong></p>
<ul>
<li>如想通过反射创建对象，则创建对象的操作对应的结构主要由<strong>构造器负责</strong></li>
<li>因此获取<strong>构造器结构</strong>对应的封装类，即<strong>Constructor</strong>对象实例，通过getConstructor()方法对应获取</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Constructor&lt;Person&gt; constructor = clazz1.getConstructor(String.class, <span class="keyword">int</span>.class);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>通过反射操作对应负责的<strong>结构对象实例，调用操作对应的方法进行反射操作</strong></p>
<ul>
<li>如还是实例化对象的反射操作</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Person person = constructor.newInstance(<span class="string">&quot;Tom&quot;</span>, <span class="number">123</span>);</span><br><span class="line">System.out.println(person);<span class="comment">//Person&#123;name=&#x27;Tom&#x27;, age=123&#125;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="类加载过程">类加载过程</h1>
<ul>
<li>反射学习阶段了解简述即可</li>
<li>详解可供补充学习</li>
</ul>
<h2 id="加载过程">加载过程</h2>
<h3 id="简述">简述</h3>
<ul>
<li>程序经过<code>javac.exe</code>命令<strong>编译</strong>以后，会生成<strong>一个或多个字节码文件</strong>(.class结尾)</li>
<li>接下来使用<code>java.exe</code>命令对某个字节码文件进行<strong>解释运行</strong>。相当于将某个<strong>字节码文件加载到内存</strong>中,此过程就称为<strong>类的加载</strong></li>
<li><strong>加载到内存中的类</strong>(不是类的对象)，我们就称为<strong>运行时类</strong>，此运行时类对应一个Class实例</li>
<li>加载到内存中的运行时类，<strong>会缓存一定的时间</strong>。在此时间之内，我们可以通过<strong>不同的方式</strong><br>
<strong>来获取此运行时类</strong></li>
</ul>
<hr>
<p><strong>小结</strong>：一个类只有一个运行时类的Class对象(封装了该类信息的对象)，即Class的实例</p>
<h3 id="详解">详解</h3>
<p>当程序主动使用某个类时，如果该类还未被加载到内存中，则系统会通过 如下三个步骤来对该类进行初始化</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://gitee.com/yihangdeng/blogImage/raw/master/img/20210623163803.png"
                      alt=""
                ></p>
<h4 id="类的加载">类的加载</h4>
<p>类的加载：将class文件字节码内容加载到内存中，并将这些静态数据转换成方法区的运行时 数据结构，然后<strong>生成一个代表这个类的java.lang.Class对象</strong>，作为方法区中类数据的访问 入口（即引用地址）。所有需要访问和使用类数据只能通过这个Class对象。这个加载的 过程需要类加载器参与。</p>
<h4 id="类的链接">类的链接</h4>
<p>将Java类的二进制代码合并到JVM的运行状态之中的过程。</p>
<ul>
<li><strong>验证</strong>：确保加载的类信息符合JVM规范，例如：以cafe开头，没有安全方面的问题</li>
<li><strong>准备</strong>：正式为类变量（<strong>static</strong>）分配内存并设置<strong>类变量默认初始值</strong>的阶段，这些内存 都将在方法区中进行分配。</li>
<li><strong>解析</strong>：虚拟机常量池内的符号引用（常量名）替换为直接引用（地址）的过程。</li>
</ul>
<h4 id="类的初始化">类的初始化</h4>
<ul>
<li>执行类构造器&lt;clinit&gt;()方法的过程。类构造器&lt;clinit&gt;()方法是由编译期自动收集类中所有<strong>类变量的赋值</strong>(static)动作和静态代码块中的语句合并产生的。（类构造器是构造类信 息的，不是构造该类对象的构造器）。</li>
<li>当初始化一个类的时候，如果发现其父类还没有进行初始化，则需要先触发其父类的初始化。</li>
<li>虚拟机会保证一个类的()方法在多线程环境中被正确加锁和同步。</li>
</ul>
<h2 id="类加载器">类加载器</h2>
<p>ClassLoader译为，类加载器/装载器，主要用于把类加载进入内存中</p>
<h3 id="作用">作用</h3>
<ul>
<li>将class文件字节码内容<strong>加载到内存</strong>中，并将这些静态数据转换成方法区的运行时数据结构，</li>
<li>在堆中生成一个代表这个类的java.lang.Class对象，作为方法区中类数据的访问入口。</li>
</ul>
<h3 id="类缓存">类缓存</h3>
<p>标准的JavaSE类加载器可以按要求查找类，但一旦某个类被加载到类加载器中，它将<strong>维持加载</strong>（缓存）<strong>一段时间</strong>，<strong>且只存在一份</strong>，不过JVM垃圾回收机制可以回收这些Class对象。</p>
<h3 id="ClassLoader">ClassLoader</h3>
<p>类加载器作用是用来把类(class)装载进内存的。JVM 规范定义了如下类型的类的加载器。</p>
<ul>
<li><strong>引导类加载器</strong>：加载<strong>核心库</strong>，<strong>无法获取</strong></li>
<li><strong>扩展类加载器</strong>：加载<code>jre/lib/ext</code>目录下的jar包，<strong>可获取</strong></li>
<li><strong>系统类加载器</strong>：最常用，负责加载<code>java -classpath</code>下的类或jar包，即平常<strong>自定义类</strong>。<strong>可获取</strong></li>
</ul>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://gitee.com/yihangdeng/blogImage/raw/master/img/Java%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E7%B1%BB%E5%9E%8B.png"
                      alt=""
                ></p>
<h4 id="获取类加载器">获取类加载器</h4>
<ul>
<li>获取系统类加载器、扩展类加载器、以及尝试获取引导类加载器</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.website.java;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yhd</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2021-06-23 17:07</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassLoaderTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1、获取系统类加载器，通过任意自定义类的运行时类Class对象获取</span></span><br><span class="line">        ClassLoader classLoader = ClassLoaderTest.class.getClassLoader();</span><br><span class="line">        System.out.println(<span class="string">&quot;系统类加载器：&quot;</span> + classLoader);<span class="comment">//sun.misc.Launcher$AppClassLoader@18b4aac2</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//类加载器只有一个，所有自定义类都是共用一个系统类加载器</span></span><br><span class="line">        ClassLoader classLoader2 = Person.class.getClassLoader();</span><br><span class="line">        System.out.println(classLoader == classLoader2);<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2、获取扩展类加载器</span></span><br><span class="line">        ClassLoader parent = classLoader.getParent();</span><br><span class="line">        System.out.println(<span class="string">&quot;扩展类加载器：&quot;</span> + parent);<span class="comment">//sun.misc.Launcher$ExtClassLoader@4554617c</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//3、尝试获取引导类加载器，用于加载Java核心库</span></span><br><span class="line">        ClassLoader parent1 = parent.getParent();</span><br><span class="line">        System.out.println(<span class="string">&quot;尝试获取引导类加载器：&quot;</span> + parent1);<span class="comment">//null</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//尝试获取引导类加载器等价于获取String(核心类库)的类加载器</span></span><br><span class="line">        ClassLoader classLoader1 = String.class.getClassLoader();</span><br><span class="line">        System.out.println(<span class="string">&quot;尝试获取String类加载器(引导类加载器)&quot;</span> + classLoader1);<span class="comment">//null</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="类加载器读取文件">类加载器读取文件</h4>
<ul>
<li>类加载器的getResourceAsStream(String path)方法，默认相对路径于<strong>src目录下</strong></li>
<li>IDEA中@Test单元测试下File操作默认相对路径于<strong>module根目录下</strong></li>
<li>IDEA中main方法下File操作默认相对路径于<strong>Project根目录下</strong></li>
</ul>
<p><strong>tips</strong>：无论是File方式还是类加载器方式，<strong>建议配置文件都放入src下</strong>，module/project根目录下的其他文件在部署到tomcat服务器时是不会被加载的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    Properties pros =  <span class="keyword">new</span> Properties();</span><br><span class="line">    <span class="comment">//此时的文件默认在当前的module下。</span></span><br><span class="line">    <span class="comment">//读取配置文件的方式一：</span></span><br><span class="line">    <span class="comment">//        FileInputStream fis = new FileInputStream(&quot;jdbc.properties&quot;);</span></span><br><span class="line">    <span class="comment">//        FileInputStream fis = new FileInputStream(&quot;src\\jdbc.properties&quot;);</span></span><br><span class="line">    <span class="comment">//        pros.load(fis);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//配置文件默认识别为：当前module的src下</span></span><br><span class="line">    ClassLoader classLoader = ClassLoaderTest.class.getClassLoader();</span><br><span class="line">    InputStream is = classLoader.getResourceAsStream(<span class="string">&quot;jdbc.properties&quot;</span>);</span><br><span class="line">    pros.load(is);</span><br><span class="line"></span><br><span class="line">    String user = pros.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">    String password = pros.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;user = &quot;</span> + user + <span class="string">&quot;,password = &quot;</span> + password);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="创建运行时类对象">创建运行时类对象</h1>
<p>反射创建运行类对象实例的方式有<strong>两种</strong>：</p>
<ol>
<li><strong>最常用</strong>，执行目标创建对象的类的Class实例的<code>clazz.newInstance()</code>方法(空参构造器)</li>
<li>少用，兼容性不够强，通过构造器结构的封装类对象<code>constructor.newInstance()</code>方法</li>
</ol>
<h2 id="newInstance">newInstance()</h2>
<p>通过<strong>newInstance</strong>()创建运行时类对象前提</p>
<ul>
<li>运行时类必须提供<strong>空参构造器</strong></li>
<li>空参构造器的<strong>权限</strong>必须足够访问，一般为<strong>public</strong></li>
</ul>
<p><strong>注</strong>：newInstance()是最常用反射创建对象的方法，框架底层都使用该方式，<strong>兼容性更强</strong>。为了便与通过反射创建运行时类的对象，及其继承关系的类都能一并调用，一般<strong>Java类都设置一个public空参构造器</strong>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Class&lt;Person&gt; clazz = Person.class;</span><br><span class="line">Person person = clazz.newInstance();</span><br><span class="line">System.out.println(person);<span class="comment">//Person&#123;name=&#x27;null&#x27;, age=0&#125;</span></span><br></pre></td></tr></table></figure>
<h1 id="获取运行时类结构">获取运行时类结构</h1>
<p>获取运行时类的结构，如常见的类结构：属性名、方法名、构造器、注解、包名、泛型、权限修饰符…</p>
<h2 id="样例">样例</h2>
<ul>
<li><strong>测试自定义父类Creature</strong>，父类含接口实现</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Creature</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">char</span> gender;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">double</span> weight;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">breath</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;生物呼吸&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;生物吃东西&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>测试自定义注解MyAnnotation</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.annotation.ElementType.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target(&#123;TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnnotation &#123;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> &quot;hello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>测试自定义接口MyInterface</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyInterface</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">info</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>测试普通Java类，Person</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MyAnnotation(value=&quot;hi&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">extends</span> <span class="title">Creature</span>&lt;<span class="title">String</span>&gt; <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">String</span>&gt;,<span class="title">MyInterface</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@MyAnnotation(value=&quot;abc&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Person</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     Person(String name,<span class="keyword">int</span> age)&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@MyAnnotation</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">show</span><span class="params">(String nation)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;我的国籍是：&quot;</span> + nation);</span><br><span class="line">        <span class="keyword">return</span> nation;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">display</span><span class="params">(String interests,<span class="keyword">int</span> age)</span> <span class="keyword">throws</span> NullPointerException,ClassCastException</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> interests + age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">info</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;我是一个人&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(String o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showDesc</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;我是一个可爱的人&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Person&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Field">Field</h2>
<h3 id="获取所有属性">获取所有属性</h3>
<ul>
<li><strong>API</strong></li>
<li>tips：Declared，表声明之意</li>
</ul>
<table>
<thead>
<tr>
<th>Methods</th>
<th>Descriptions</th>
</tr>
</thead>
<tbody>
<tr>
<td>Field[] fields <strong>getFields</strong>()</td>
<td>获取当前运行时类及其父类中public权限的属性Field数组</td>
</tr>
<tr>
<td>Field <strong>getField</strong>(String name)</td>
<td>给定属性名返回当前运行时类及其父类中public权限的属性Field</td>
</tr>
<tr>
<td>Field[] <strong>getDeclaredFields</strong>()</td>
<td>获取<strong>当前运行时类</strong>中<strong>声明</strong>的<strong>所有属性</strong>(无权限要求，不包含父类)</td>
</tr>
<tr>
<td>Field <strong>getDeclaredField</strong>(String name)</td>
<td>在getDeclaredFields()方法基础上获取指定属性名</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>示例代码</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.website.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yhd</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2021-06-23 22:33</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetFieldTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> NoSuchFieldException </span>&#123;</span><br><span class="line">        Class&lt;Person&gt; clazz = Person.class;</span><br><span class="line">        System.out.println(clazz.getField(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">        System.out.println(clazz.getDeclaredField(<span class="string">&quot;name&quot;</span>));</span><br><span class="line"></span><br><span class="line">        Field[] fields = clazz.getFields();</span><br><span class="line">        <span class="keyword">for</span> (Field field : fields) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;field = &quot;</span> + field);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Field[] declaredFields = clazz.getDeclaredFields();</span><br><span class="line">        <span class="keyword">for</span> (Field declaredField : declaredFields) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;declaredField = &quot;</span> + declaredField);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="获取属性结构">获取属性结构</h3>
<ul>
<li>
<p>获取的属性返回是一个Field类型，每一个<strong>Field结构封装了一个属性包含的所有结构</strong></p>
</li>
<li>
<p>如属性的权限修饰符、数据类型、变量名、被修饰的注解等等…</p>
</li>
</ul>
<h4 id="Field属性">Field属性</h4>
<ul>
<li>Field的属性封装类一个属性所包含的所有结构</li>
<li>若想获取或设置这些结构的值，则通过对应属性的getter和setter方法操作即可</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Field</span> <span class="keyword">extends</span> <span class="title">AccessibleObject</span> <span class="keyword">implements</span> <span class="title">Member</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Class&lt;?&gt;            clazz;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>                 slot;</span><br><span class="line">    <span class="keyword">private</span> String              name;<span class="comment">//属性名</span></span><br><span class="line">    <span class="keyword">private</span> Class&lt;?&gt;            type;<span class="comment">//属性的数据类型</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>                 modifiers;<span class="comment">//属性的权限修饰符</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> String    signature;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> FieldRepository genericInfo;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span>[]              annotations;<span class="comment">//注解</span></span><br><span class="line">    <span class="keyword">private</span> FieldAccessor fieldAccessor;</span><br><span class="line">    <span class="keyword">private</span> FieldAccessor overrideFieldAccessor;</span><br><span class="line">    <span class="keyword">private</span> Field               root;</span><br><span class="line">    <span class="comment">//....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="示例代码-3">示例代码</h4>
<ul>
<li>getModifiers()返回的全新修饰是整型常量</li>
<li>java.lang.reflect.Modifier定义了这些常量的含义</li>
<li>可以调用其静态的toString(int mod)方法返回这些常量的含义</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.website.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Modifier;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yhd</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2021-06-23 22:33</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FieldTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span>  </span>&#123;</span><br><span class="line">        Class&lt;Person&gt; clazz = Person.class;</span><br><span class="line">        Field[] declaredFields = clazz.getDeclaredFields();</span><br><span class="line">        <span class="keyword">for</span> (Field field : declaredFields) &#123;</span><br><span class="line">            System.out.print(field.getModifiers()  + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            System.out.print(Modifier.toString(field.getModifiers()) + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            System.out.print(field.getType() + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            System.out.print(field.getName() + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Method">Method</h2>
<ul>
<li><strong>API</strong></li>
</ul>
<table>
<thead>
<tr>
<th>Methods</th>
<th>Descriptions</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method[] <strong>getMethods</strong>()</td>
<td>获取当前运行时类及其父类中public权限的所有方法，返回Method数组</td>
</tr>
<tr>
<td>Method <strong>getMethod</strong>(String name, Class&lt;?&gt;… parameterTypes)</td>
<td>给定方法名及其方法的参数类型(重载)，获取当前运行时类及其父类中public权限的Method数组</td>
</tr>
<tr>
<td>Method[] <strong>getDeclaredMethods</strong>()</td>
<td>获取<strong>当前运行时类</strong>中<strong>声明</strong>的<strong>所有方法</strong>(无权限要求，不包含父类)</td>
</tr>
<tr>
<td>Method <strong>getDeclaredMethod</strong>(String name, Class&lt;?&gt;… parameterTypes)</td>
<td>在getDeclaredMethods()方法基础上获取指定方法名和形成列表的Method对象</td>
</tr>
</tbody>
</table>
<h3 id="获取所有方法">获取所有方法</h3>
<ul>
<li>类获取所有属性</li>
</ul>
<h3 id="获取方法的结构">获取方法的结构</h3>
<h4 id="Method属性">Method属性</h4>
<ul>
<li>同Field属性使用，getter和setter方法使用</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Method</span> <span class="keyword">extends</span> <span class="title">Executable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Class&lt;?&gt;            clazz;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>                 slot;</span><br><span class="line">    <span class="keyword">private</span> String              name;<span class="comment">//方法名</span></span><br><span class="line">    <span class="keyword">private</span> Class&lt;?&gt;            returnType;<span class="comment">//返回类型</span></span><br><span class="line">    <span class="keyword">private</span> Class&lt;?&gt;[]          parameterTypes;<span class="comment">//参数列表</span></span><br><span class="line">    <span class="keyword">private</span> Class&lt;?&gt;[]          exceptionTypes;<span class="comment">//异常类型(抛出的异常)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>                 modifiers;<span class="comment">//权限修饰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> String              signature;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> MethodRepository genericInfo;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span>[]              annotations;<span class="comment">//注解</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span>[]              parameterAnnotations;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span>[]              annotationDefault;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> MethodAccessor methodAccessor;</span><br><span class="line">    <span class="keyword">private</span> Method              root;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Constructor">Constructor</h2>
<ul>
<li>类获取Field和Method，都是常规四个方法，一种声明的，一种非声明的。分别有指定的和全部的。</li>
<li>以下取获取全部的说明区别</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    Class clazz = Person.class;</span><br><span class="line">    <span class="comment">//getConstructors():获取当前运行时类中声明为public的构造器(不包含父类)</span></span><br><span class="line">    Constructor[] constructors = clazz.getConstructors();</span><br><span class="line">    <span class="keyword">for</span>(Constructor c : constructors)&#123;</span><br><span class="line">        System.out.println(c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    System.out.println();</span><br><span class="line">    <span class="comment">//getDeclaredConstructors():获取当前运行时类中声明的所有的构造器(不包含父类)</span></span><br><span class="line">    Constructor[] declaredConstructors = clazz.getDeclaredConstructors();</span><br><span class="line">    <span class="keyword">for</span>(Constructor c : declaredConstructors)&#123;</span><br><span class="line">        System.out.println(c);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Superclass">Superclass</h2>
<h3 id="普通父类">普通父类</h3>
<ul>
<li>获取父类，或者如果父类是带泛型的，可以调用获取带泛型的父类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Class clazz = Person.class;</span><br><span class="line"></span><br><span class="line">    Class superclass = clazz.getSuperclass();</span><br><span class="line">    System.out.println(superclass);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="带泛型信息父类">带泛型信息父类</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Class clazz = Person.class;</span><br><span class="line"></span><br><span class="line">    Type genericSuperclass = clazz.getGenericSuperclass();</span><br><span class="line">    System.out.println(genericSuperclass);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="泛型父类的泛型类型">泛型父类的泛型类型</h3>
<h4 id="应用场景">应用场景</h4>
<ul>
<li>原生业务XxxxxDAO继承DAO&lt;T&gt;时，需要获取父类的泛型类型(全类名)来通过反射创建一个对象。再将查询结果的数据通过反射写入对象中。即DAO&lt;T&gt;中的T类型。</li>
<li>注意，泛型T是不能够调用任何方法的，不存在<code>T.class()</code></li>
<li>泛型在此的作用只是返回类型时是明确的指定的类型，免去了强制类型转换的步骤，但不能为反射提供任何信息。</li>
</ul>
<p><strong>注</strong>：除获取父类泛型类型外，更加简单的<strong>反射目标类型提供</strong>方法是传入<strong>Class</strong>&lt;T&gt;类型参数，如<strong>DBUtils.jar</strong>的方法的方式</p>
<h4 id="Type">Type</h4>
<ul>
<li><strong>Type</strong>是一个接口，是Java编程语言中所有类型的通用超级接口，<strong>Class也实现了Type接口</strong>。因此若获得的实现类对象是Class类型，可以将Type类型强制向下转型成Class类型使用。</li>
</ul>
<h4 id="ParameterizedType">ParameterizedType</h4>
<ul>
<li>
<p><strong>ParameterizedType</strong>也是一个接口，并<strong>继承了Type接口</strong>。用于描述一个参数化类型(即带泛型描述的类型)</p>
</li>
<li>
<p>声明类型中带有<code>“&lt;&gt;”</code>的都是参数化类型</p>
</li>
<li>
<p>如<code>Collection &lt;String&gt;</code>这个整体表示一个参数化类型。</p>
<hr>
</li>
<li>
<p><strong>对象获取</strong>：<code>clazz.getGenericSuperclass();</code>方法返回的实际是<strong>ParameterizedType</strong>接口的<strong>实现类</strong></p>
</li>
<li>
<p><strong>ParameterizedType</strong>接口常用的方法</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Methods</th>
<th>Descriptions</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type[] <strong>getActualTypeArguments</strong>()</td>
<td>返回实际的参数类型，即泛型类型数组。<br/>即“&lt;&gt;”里的参数，比如Map&lt;String,Integer&gt;中的String、Integer</td>
</tr>
<tr>
<td>Tpye <strong>getRawType</strong>()</td>
<td>返回原始类型，即得到“&lt;&gt;”前面的类型，比如List&lt;String&gt;中的<strong>List</strong></td>
</tr>
<tr>
<td>Type <strong>getOwnerType</strong>()</td>
<td><code>O&lt;T&gt;.I&lt;S&gt;</code>类型变量调用时会返回<code>O&lt;T&gt;</code>，比如<strong>Map</strong>.Entry&lt;Long,Short&gt;</td>
</tr>
<tr>
<td>…</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="代码示例">代码示例</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.website.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.ParameterizedType;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Type;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yhd</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2021-06-24 16:32</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Class&lt;Person&gt; clazz = Person.class; //class Person extends GenericClass&lt;Date,String&gt;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//获取父类类型(带泛型参数)</span></span><br><span class="line">        Type genericSuperclass = clazz.getGenericSuperclass();</span><br><span class="line">        ParameterizedType parameterizedType = (ParameterizedType) genericSuperclass;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取父类类型</span></span><br><span class="line">        Type rawType = parameterizedType.getRawType();</span><br><span class="line">        System.out.println(<span class="string">&quot;rawType = &quot;</span> + rawType);<span class="comment">//com.website.java.GenericClass</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取父类的泛型类型</span></span><br><span class="line">        System.out.println(<span class="string">&quot;-----------------&quot;</span>);</span><br><span class="line">        Type[] actualTypeArguments = parameterizedType.getActualTypeArguments();</span><br><span class="line">        <span class="keyword">for</span> (Type actualTypeArgument : actualTypeArguments) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;actualTypeArgument = &quot;</span> + actualTypeArgument.getTypeName());</span><br><span class="line">            <span class="comment">//java.util.Date</span></span><br><span class="line">            <span class="comment">//java.lang.String</span></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------------&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//从Type的打印的信息中可以看到，class java.util.Date其实现类就是Class</span></span><br><span class="line">        <span class="comment">//有必要的话，也可向下强制转换为Class类型，</span></span><br><span class="line">        Class argument = (Class) actualTypeArguments[<span class="number">0</span>];</span><br><span class="line">        System.out.println(argument.getName());<span class="comment">//java.util.Date</span></span><br><span class="line"></span><br><span class="line">        Type ownerType = parameterizedType.getOwnerType();</span><br><span class="line">        System.out.println(<span class="string">&quot;ownerType = &quot;</span> + ownerType);<span class="comment">// null</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Interface">Interface</h2>
<ul>
<li>获取运行时类接口</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test5</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Class clazz = Person.class;</span><br><span class="line"></span><br><span class="line">    Class[] interfaces = clazz.getInterfaces();</span><br><span class="line">    <span class="keyword">for</span>(Class c : interfaces)&#123;</span><br><span class="line">        System.out.println(c);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Package">Package</h2>
<ul>
<li>获取运行时类所在的包</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test6</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Class clazz = Person.class;</span><br><span class="line"></span><br><span class="line">    Package pack = clazz.getPackage();</span><br><span class="line">    System.out.println(pack);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Annotation">Annotation</h2>
<ul>
<li>获取运行时类的注解</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test7</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Class clazz = Person.class;</span><br><span class="line"></span><br><span class="line">    Annotation[] annotations = clazz.getAnnotations();</span><br><span class="line">    <span class="keyword">for</span>(Annotation annos : annotations)&#123;</span><br><span class="line">        System.out.println(annos);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="调用指定结构">调用指定结构</h1>
<h2 id="Field-2">Field</h2>
<h3 id="非静态属性">非静态属性</h3>
<h4 id="步骤">步骤</h4>
<ol>
<li><strong>获取</strong>需要修改的属性封装结构<strong>Field实例</strong>，一般使用getDeclaredField(String fieldName)</li>
<li>对于操作<strong>非静态属性</strong>，需<strong>创建</strong>需要修改该属性的<strong>对象</strong></li>
<li>调用Field的提供的方法
<ul>
<li><strong>set</strong>()方法，传入修改属性的对象和属性值</li>
<li><strong>get</strong>()方法，传入指定对象，获取该对象的Field属性值</li>
</ul>
</li>
</ol>
<hr>
<p><strong>注</strong>：<strong>IllegalAccessException</strong>，通过<strong>getDeclaredField</strong>(String fieldName)获取的<strong>非public属性Field封装类</strong>，在<strong>调用set</strong>()方法时<strong>还是不具备修改权限</strong>的。需要在set()操作之前，将非public权限的属性调用<strong>setAccessible</strong>(true)方法，使其允许被修改。</p>
<h4 id="示例代码-4">示例代码</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.website.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yhd</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2021-06-23 22:33</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FieldTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="comment">//1、获取拟操作属性的封装结构实例，即Field实例</span></span><br><span class="line">        Class&lt;Person&gt; clazz = Person.class;</span><br><span class="line">        Field ageField = clazz.getDeclaredField(<span class="string">&quot;age&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2、对于非public权限的值，即使getDeclaredField能获取到Field实例</span></span><br><span class="line">        <span class="comment">//但还不具备属性修改权限，需设置使其属性能够被访问</span></span><br><span class="line">        ageField.setAccessible(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3、设置ageField属性值(指定被修改属性的对象，修改的属性值)</span></span><br><span class="line">        <span class="comment">//3.1、准备被修改Field属性的对象</span></span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line">        System.out.println(person);<span class="comment">//Person&#123;name=&#x27;null&#x27;, age=0&#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.2、修改age属性值(指定被修改属性的对象，修改的属性值)</span></span><br><span class="line">        ageField.set(person,<span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4、获取ageField属性值(指定被获取属性值的对象)</span></span><br><span class="line">        System.out.println(ageField.get(person));<span class="comment">//9999</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="静态属性">静态属性</h3>
<ul>
<li>静态属性操作步骤和非静态类似，</li>
<li>主要区别在于，调用set(Object obj, Objec val)方法时，第一个形参Object obj,可以写任意参数，一般写反射类的Class对象，或者直接写null即可。</li>
</ul>
<h2 id="Method-2">Method</h2>
<ul>
<li>操作运行时类中的指定方法</li>
</ul>
<h3 id="非静态方法">非静态方法</h3>
<h4 id="步骤-2">步骤</h4>
<ol>
<li><strong>获取</strong>需要调用的方法封装结构<strong>Method实例</strong>，一般使用<strong>getDeclaredMethod</strong>(String name, Class&lt;?&gt;… parameterTypes);
<ul>
<li><strong>String</strong> <strong>name</strong>：指定的方法名</li>
<li><strong>Class</strong>&lt;?&gt;… <strong>parameterTypes</strong>：可变形参类型列表，即对应方法的<strong>形参列表</strong>。因为<strong>方法具有重载特性</strong>，因此需指定方法名和参数列表才能唯一确定一个方法。</li>
</ul>
</li>
<li>对于操作<strong>非静态方法</strong>，需<strong>创建</strong>调用该方法的<strong>对象</strong></li>
<li>调用Method的提供的<strong>invoke</strong>(Object obj, Object… args)方法，即“调用”含义
<ul>
<li><strong>Object obj</strong>：方法调用的对象</li>
<li><strong>Object…args</strong>：调用方法传入的实参列表</li>
</ul>
</li>
</ol>
<p><strong>注</strong>：<strong>IllegalAccessException</strong>，同理属性的非public修饰符缺少修改权限。需在调用非public方法前调用<strong>setAccessible</strong>(true)方法，使其方法允许被调用。</p>
<h4 id="示例代码-5">示例代码</h4>
<ul>
<li><strong>Person</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">extends</span> <span class="title">GenericClass</span>&lt;<span class="title">Date</span>,<span class="title">String</span>&gt;</span>&#123;    </span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> String <span class="title">show</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Method show ：&quot;</span> + name);</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>反射示例代码</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.website.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yhd</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2021-06-27 8:46</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MethodTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1、获取Class类型</span></span><br><span class="line">        Class&lt;Person&gt; clazz = Person.class;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2、获取指定调用方法的Method封装类实例</span></span><br><span class="line">        Method showMethod = clazz.getDeclaredMethod(<span class="string">&quot;show&quot;</span>, String.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3、非静态方法调用，需提供调用对象</span></span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4、非public权限的方法，在调用之前需设置可调用权限</span></span><br><span class="line">        showMethod.setAccessible(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5、通过invoke()调用方法，invoke本身具备的返回值就是调用的方法的返回值</span></span><br><span class="line">        Object returnValue = showMethod.invoke(person,<span class="string">&quot;Tom&quot;</span>);<span class="comment">//Method show ：Tom</span></span><br><span class="line">        System.out.println(<span class="string">&quot;returnValue = &quot;</span> + returnValue);<span class="comment">//returnValue = Tom</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="静态方法">静态方法</h3>
<ul>
<li>静态方法调用步骤和非静态类似，</li>
<li>主要区别在于，调用invoke(Object obj, Object… args)方法时，第一个形参Object obj,可以写任意参数，一般写反射类的Class对象，或者直接写null即可。</li>
</ul>
<h2 id="Constructor-2">Constructor</h2>
<ul>
<li>调用运行时类中的构造器，<strong>不常用</strong>。一般99%使用newinstance()方法</li>
</ul>
<h3 id="步骤-3">步骤</h3>
<ol>
<li><strong>获取</strong>需要调用的方法封装结构<strong>Method实例</strong>，一般使用<strong>getDeclaredConstructor</strong>(Class&lt;?&gt;… parameterTypes);
<ul>
<li><strong>Class</strong>&lt;?&gt;… <strong>parameterTypes</strong>：可变形参类型列表，即对应构造器的<strong>形参列表</strong>。因为<strong>构造器也具有重载特性</strong>，因此需指定参数列表才能唯一确定一个构造器</li>
</ul>
</li>
<li>调用Constructor的提供的<strong>newInstance</strong>(Object… args)方法，创建构造器
<ul>
<li><strong>Object…args</strong>：调用构造器传入的实参列表</li>
</ul>
</li>
</ol>
<p><strong>注</strong>：<strong>IllegalAccessException</strong>，同理属性和方法的非public修饰符缺少修改权限。需在调用非public方法前调用<strong>setAccessible</strong>(true)方法，使其方法允许被调用。</p>
<h3 id="示例代码-6">示例代码</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.website.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yhd</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2021-06-27 9:17</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConstructorTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Class&lt;Person&gt; clazz = Person.class;</span><br><span class="line"></span><br><span class="line">        Constructor&lt;Person&gt; constructor = </span><br><span class="line">            clazz.getDeclaredConstructor(String.class, <span class="keyword">int</span>.class);</span><br><span class="line">        </span><br><span class="line">        constructor.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        Person person = constructor.newInstance(<span class="string">&quot;Tom&quot;</span>, <span class="number">23</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;person = &quot;</span> + person);<span class="comment">//person = Person&#123;name=&#x27;Tom&#x27;, age=23&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="反射的应用">反射的应用</h1>
<h2 id="动态代理">动态代理</h2>
<h3 id="基本概念-2">基本概念</h3>
<ul>
<li>代理设计模式的原理:  使用一个代理将对象包装起来, 然后用该代理对象取代原始对象。任何对原始对象的调用都要通过代理。代理对象决定是否以及何时将方法调用转到原 始对象上。</li>
<li>例如，你想去买房，通过销售或其他中间商买，则就是销售和中间级作为代理替你完成了买房的操作，即代理类。而你自己就是被代理类。</li>
</ul>
<h3 id="静态代理">静态代理</h3>
<h4 id="实现原理">实现原理</h4>
<p>实现<strong>静态代理</strong>/一般代理，需要<strong>两个类</strong>(代理类、被代理类)和共同的<strong>一个接口</strong>构成一个<strong>三角关系</strong></p>
<hr>
<ol>
<li>拥有一个被代理类，并选取需要代理执行的方法。</li>
<li>创建一个被代理类和代理类都需共同实现的一个代理方法接口，并把需要代理的方法声明在接口中</li>
<li>创建被代理类，
<ol>
<li>声明一个被代理对象的属性：由于某些方法代理类是无法直接完成的，考内部调用被代理类实现</li>
<li>通过代理类构造器实例化这个被代理类对象的引用</li>
</ol>
</li>
<li>代理类和被代理类同时实现代理方法接口，并各自实现里面的方法。
<ul>
<li>被代理类按正常情况实现方法</li>
<li>代理类根据实际功能范围，去辅助被代理类完成功能</li>
</ul>
</li>
<li>实例化时，通过构造器传入被代理类对象，实例化代理类。后续方法调用均通过代理类进行调用。</li>
</ol>
<h4 id="特征">特征</h4>
<ul>
<li>静态代理，特征是代理类和目标 对象的类都是在编译期间确定下来。</li>
<li>即，一个/类被代理类需要对应一个代理，即代理类中的被代理类引用类型定义是编译时期固定下来了。</li>
<li>而且在实现接口时，需要实现同一个提前定义好的接口。</li>
</ul>
<h4 id="示例代码-7">示例代码</h4>
<p>例如：一个歌星(被代理类)，需要一个代理(代理类)，辅助完成经纪人订票操作。而且代理地实现唱歌操作。</p>
<ol>
<li>如<strong>RealStar</strong>.java是真是的明星类，选取，bookTicket()，sing()方法作为被代理方法。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//被代理类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RealStart</span> <span class="keyword">implements</span> <span class="title">Star</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span> <span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;明星吃饭...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;明星跑&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bookTicket</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;明星亲自去订票&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sing</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;明星唱歌&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>创建一个代理方法接口<strong>Star</strong>.java，把需要代理的方法bookTicket()，sing()声明在接口处</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//代理方法接口</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Star</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">bookTicket</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sing</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>创建代理类StarProxy</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//代理类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StarProxy</span> <span class="keyword">implements</span> <span class="title">Star</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> RealStart realStart;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StarProxy</span><span class="params">(RealStart realStart)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.realStart = realStart;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bookTicket</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;由代理去完成订票操作&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;----------------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sing</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//代理无法代理地完成唱歌操作，不过可以在前在后辅助被代理类sing()方法</span></span><br><span class="line">        System.out.println(<span class="string">&quot;代理在明星唱歌前的一些辅助工作&quot;</span>);</span><br><span class="line">        realStart.sing();</span><br><span class="line">        System.out.println(<span class="string">&quot;代理在明星唱完歌后进行一些善后工作&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;----------------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>通过代理类StarProxy进行代理方法调用</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticProxy</span> </span>&#123;</span><br><span class="line">    <span class="comment">//测试</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        RealStart realStart = <span class="keyword">new</span> RealStart();</span><br><span class="line">        StarProxy proxy = <span class="keyword">new</span> StarProxy(realStart);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//代理方法调用</span></span><br><span class="line">        proxy.bookTicket();</span><br><span class="line">        proxy.sing();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="实际应用">实际应用</h4>
<ul>
<li>其实Runnable接口方式创建多线程就是一个静态代理</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Class MyThread implements Runnable&#123;&#125; <span class="comment">//相当于被代理类</span></span><br><span class="line">Class Thread implements Runnable&#123;&#125; <span class="comment">//相当于代理类</span></span><br><span class="line"></span><br><span class="line">main()&#123;</span><br><span class="line">    MyThread t = <span class="keyword">new</span> MyThread();</span><br><span class="line">    Thread thread = <span class="keyword">new</span> Thread(t);</span><br><span class="line">    thread.start();<span class="comment">//启动线程；调用线程的run()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="动态代理-2">动态代理</h3>
<h4 id="引言">引言</h4>
<ul>
<li>静态代理，特征是代理类和目标 对象的类都是在编译期间确定下来，不利于程序的扩展。</li>
<li>即，一个/类被代理类需要对应一个代理，即代理类中的被代理类引用类型定义是编译时期固定下来了。</li>
<li>而且在实现接口时，需要实现同一个提前定义好的接口。</li>
<li>因此每一个代理类只能为一个接口服务，这样一来程序开发中必然产生过多的代理。最 好可以通过一个代理类完成全部的代理功能。</li>
<li>Spring中的IOC，和AOP，其中AOP的原理就是动态代理。</li>
</ul>
<h4 id="实现原理-2">实现原理</h4>
<p>在静态代理的基础上，使其代理类成为通用的类</p>
<ol>
<li>根据加载到内存中的被代理类，动态创建一个代理类的示例作为被代理类的引用</li>
<li>获取被代理类实现的接口，并使代理类</li>
</ol>
<h4 id="示例代码-8">示例代码</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">要想实现动态代理，需要解决的问题？</span></span><br><span class="line"><span class="comment">问题一：如何根据加载到内存中的被代理类，动态的创建一个代理类及其对象。</span></span><br><span class="line"><span class="comment">问题二：当通过代理类的对象调用方法a时，如何动态的去调用被代理类中的同名方法a。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProxyFactory</span></span>&#123;</span><br><span class="line">    <span class="comment">//调用此方法，返回一个代理类的对象。解决问题一</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getProxyInstance</span><span class="params">(Object obj)</span></span>&#123;<span class="comment">//obj:被代理类的对象</span></span><br><span class="line">        MyInvocationHandler handler = <span class="keyword">new</span> MyInvocationHandler();</span><br><span class="line"></span><br><span class="line">        handler.bind(obj);</span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(obj.getClass().getClassLoader(),obj.getClass().getInterfaces(),handler);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyInvocationHandler</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Object obj;<span class="comment">//需要使用被代理类的对象进行赋值</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bind</span><span class="params">(Object obj)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.obj = obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//当我们通过代理类的对象，调用方法a时，就会自动的调用如下的方法：invoke()</span></span><br><span class="line">    <span class="comment">//将被代理类要执行的方法a的功能就声明在invoke()中</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line"></span><br><span class="line">        HumanUtil util = <span class="keyword">new</span> HumanUtil();</span><br><span class="line">        util.method1();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//method:即为代理类对象调用的方法，此方法也就作为了被代理类对象要调用的方法</span></span><br><span class="line">        <span class="comment">//obj:被代理类的对象</span></span><br><span class="line">        Object returnValue = method.invoke(obj,args);</span><br><span class="line"></span><br><span class="line">        util.method2();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//上述方法的返回值就作为当前类中的invoke()的返回值。</span></span><br><span class="line">        <span class="keyword">return</span> returnValue;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SuperMan superMan = <span class="keyword">new</span> SuperMan();</span><br><span class="line">        <span class="comment">//proxyInstance:代理类的对象</span></span><br><span class="line">        Human proxyInstance = (Human) ProxyFactory.getProxyInstance(superMan);</span><br><span class="line">        <span class="comment">//当通过代理类对象调用方法时，会自动的调用被代理类中同名的方法</span></span><br><span class="line">        String belief = proxyInstance.getBelief();</span><br><span class="line">        System.out.println(belief);</span><br><span class="line">        proxyInstance.eat(<span class="string">&quot;四川麻辣烫&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;*****************************&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="AOP原理概述">AOP原理概述</h3>
<ul>
<li>AOP代理里的方法可以在执行目标方法之前、之后插入一些通用处理</li>
<li>面向切面编程，类似面向“插入”编程，是一种<strong>非硬编码</strong>方式实现的代码复用设计模式。
<ul>
<li>硬编码代码复用：就是平时抽取相同部分的代码封装成方法从而实现代码复用的方式</li>
</ul>
</li>
<li>即自定义的代码是通过“软编码”的方式插入一些通用的代码的操作。</li>
</ul>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://gitee.com/yihangdeng/blogImage/raw/master/img/20210628091307.png"
                      alt=""
                ></p>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>Post title：Java反射机制</li>
        <li>Post author：yhd</li>
        <li>Create time：2021-06-28 09:20:34</li>
        <li>
            Post link：https://keep.xpoet.cn/2021/06/28/Java反射机制/
        </li>
        <li>
            Copyright Notice：All articles in this blog are licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> unless stating additionally.
        </li>
    </ul>
</div>

            </div>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2021/06/29/Java8(LTS)%E5%85%B6%E4%BB%96%E6%96%B0%E7%89%B9%E6%80%A7%E5%9F%BA%E7%A1%80/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Java8(LTS)其他新特性基础</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2021/06/19/Java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Java网络编程基础</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span>&nbsp;-&nbsp;
            
            2021&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">yhd</a>
        </div>
        
            <script async  src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        Visitor Count&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        Totalview&nbsp;<span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.1</a>
        </div>
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%8D%E5%B0%84%E7%9A%84%E6%A6%82%E8%BF%B0"><span class="nav-number">1.</span> <span class="nav-text">反射的概述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-number">1.1.</span> <span class="nav-text">基本概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8D%E5%B0%84%E6%8F%90%E4%BE%9B%E5%8A%9F%E8%83%BD"><span class="nav-number">1.2.</span> <span class="nav-text">反射提供功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8D%E5%B0%84%E7%9B%B8%E5%85%B3API"><span class="nav-number">1.3.</span> <span class="nav-text">反射相关API</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8D%E5%B0%84%E5%8A%A8%E6%80%81%E6%80%A7%E4%BD%93%E7%8E%B0"><span class="nav-number">1.4.</span> <span class="nav-text">反射动态性体现</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E4%B8%8E%E9%9D%99%E6%80%81%E8%AF%AD%E8%A8%80"><span class="nav-number">1.5.</span> <span class="nav-text">动态与静态语言</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E8%AF%AD%E8%A8%80"><span class="nav-number">1.5.1.</span> <span class="nav-text">动态语言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E8%AF%AD%E8%A8%80"><span class="nav-number">1.5.2.</span> <span class="nav-text">静态语言</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Class%E7%B1%BB"><span class="nav-number">2.</span> <span class="nav-text">Class类</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-number">2.1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96Class%E5%AE%9E%E4%BE%8B"><span class="nav-number">2.2.</span> <span class="nav-text">获取Class实例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="nav-number">2.2.1.</span> <span class="nav-text">示例代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Class%E5%AE%9E%E4%BE%8B%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.3.</span> <span class="nav-text">Class实例类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-2"><span class="nav-number">2.3.1.</span> <span class="nav-text">示例代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Class%E7%B1%BB%E5%B8%B8%E7%94%A8API"><span class="nav-number">2.4.</span> <span class="nav-text">Class类常用API</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%8D%E5%B0%84%E4%BD%BF%E7%94%A8%E9%80%BB%E8%BE%91"><span class="nav-number">3.</span> <span class="nav-text">反射使用逻辑</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B"><span class="nav-number">4.</span> <span class="nav-text">类加载过程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B"><span class="nav-number">4.1.</span> <span class="nav-text">加载过程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E8%BF%B0"><span class="nav-number">4.1.1.</span> <span class="nav-text">简述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%A6%E8%A7%A3"><span class="nav-number">4.1.2.</span> <span class="nav-text">详解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD"><span class="nav-number">4.1.2.1.</span> <span class="nav-text">类的加载</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B1%BB%E7%9A%84%E9%93%BE%E6%8E%A5"><span class="nav-number">4.1.2.2.</span> <span class="nav-text">类的链接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B1%BB%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-number">4.1.2.3.</span> <span class="nav-text">类的初始化</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8"><span class="nav-number">4.2.</span> <span class="nav-text">类加载器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8"><span class="nav-number">4.2.1.</span> <span class="nav-text">作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E7%BC%93%E5%AD%98"><span class="nav-number">4.2.2.</span> <span class="nav-text">类缓存</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ClassLoader"><span class="nav-number">4.2.3.</span> <span class="nav-text">ClassLoader</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8"><span class="nav-number">4.2.3.1.</span> <span class="nav-text">获取类加载器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6"><span class="nav-number">4.2.3.2.</span> <span class="nav-text">类加载器读取文件</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%BF%90%E8%A1%8C%E6%97%B6%E7%B1%BB%E5%AF%B9%E8%B1%A1"><span class="nav-number">5.</span> <span class="nav-text">创建运行时类对象</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#newInstance"><span class="nav-number">5.1.</span> <span class="nav-text">newInstance()</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E8%BF%90%E8%A1%8C%E6%97%B6%E7%B1%BB%E7%BB%93%E6%9E%84"><span class="nav-number">6.</span> <span class="nav-text">获取运行时类结构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%B7%E4%BE%8B"><span class="nav-number">6.1.</span> <span class="nav-text">样例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Field"><span class="nav-number">6.2.</span> <span class="nav-text">Field</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E5%B1%9E%E6%80%A7"><span class="nav-number">6.2.1.</span> <span class="nav-text">获取所有属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%B1%9E%E6%80%A7%E7%BB%93%E6%9E%84"><span class="nav-number">6.2.2.</span> <span class="nav-text">获取属性结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Field%E5%B1%9E%E6%80%A7"><span class="nav-number">6.2.2.1.</span> <span class="nav-text">Field属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-3"><span class="nav-number">6.2.2.2.</span> <span class="nav-text">示例代码</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Method"><span class="nav-number">6.3.</span> <span class="nav-text">Method</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E6%96%B9%E6%B3%95"><span class="nav-number">6.3.1.</span> <span class="nav-text">获取所有方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%96%B9%E6%B3%95%E7%9A%84%E7%BB%93%E6%9E%84"><span class="nav-number">6.3.2.</span> <span class="nav-text">获取方法的结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Method%E5%B1%9E%E6%80%A7"><span class="nav-number">6.3.2.1.</span> <span class="nav-text">Method属性</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Constructor"><span class="nav-number">6.4.</span> <span class="nav-text">Constructor</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Superclass"><span class="nav-number">6.5.</span> <span class="nav-text">Superclass</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%99%AE%E9%80%9A%E7%88%B6%E7%B1%BB"><span class="nav-number">6.5.1.</span> <span class="nav-text">普通父类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%A6%E6%B3%9B%E5%9E%8B%E4%BF%A1%E6%81%AF%E7%88%B6%E7%B1%BB"><span class="nav-number">6.5.2.</span> <span class="nav-text">带泛型信息父类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%9B%E5%9E%8B%E7%88%B6%E7%B1%BB%E7%9A%84%E6%B3%9B%E5%9E%8B%E7%B1%BB%E5%9E%8B"><span class="nav-number">6.5.3.</span> <span class="nav-text">泛型父类的泛型类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">6.5.3.1.</span> <span class="nav-text">应用场景</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Type"><span class="nav-number">6.5.3.2.</span> <span class="nav-text">Type</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ParameterizedType"><span class="nav-number">6.5.3.3.</span> <span class="nav-text">ParameterizedType</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B"><span class="nav-number">6.5.3.4.</span> <span class="nav-text">代码示例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Interface"><span class="nav-number">6.6.</span> <span class="nav-text">Interface</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Package"><span class="nav-number">6.7.</span> <span class="nav-text">Package</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Annotation"><span class="nav-number">6.8.</span> <span class="nav-text">Annotation</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E6%8C%87%E5%AE%9A%E7%BB%93%E6%9E%84"><span class="nav-number">7.</span> <span class="nav-text">调用指定结构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Field-2"><span class="nav-number">7.1.</span> <span class="nav-text">Field</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%9E%E9%9D%99%E6%80%81%E5%B1%9E%E6%80%A7"><span class="nav-number">7.1.1.</span> <span class="nav-text">非静态属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A4"><span class="nav-number">7.1.1.1.</span> <span class="nav-text">步骤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-4"><span class="nav-number">7.1.1.2.</span> <span class="nav-text">示例代码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E5%B1%9E%E6%80%A7"><span class="nav-number">7.1.2.</span> <span class="nav-text">静态属性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Method-2"><span class="nav-number">7.2.</span> <span class="nav-text">Method</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%9E%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95"><span class="nav-number">7.2.1.</span> <span class="nav-text">非静态方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A4-2"><span class="nav-number">7.2.1.1.</span> <span class="nav-text">步骤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-5"><span class="nav-number">7.2.1.2.</span> <span class="nav-text">示例代码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95"><span class="nav-number">7.2.2.</span> <span class="nav-text">静态方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Constructor-2"><span class="nav-number">7.3.</span> <span class="nav-text">Constructor</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A4-3"><span class="nav-number">7.3.1.</span> <span class="nav-text">步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-6"><span class="nav-number">7.3.2.</span> <span class="nav-text">示例代码</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%8D%E5%B0%84%E7%9A%84%E5%BA%94%E7%94%A8"><span class="nav-number">8.</span> <span class="nav-text">反射的应用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="nav-number">8.1.</span> <span class="nav-text">动态代理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5-2"><span class="nav-number">8.1.1.</span> <span class="nav-text">基本概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86"><span class="nav-number">8.1.2.</span> <span class="nav-text">静态代理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="nav-number">8.1.2.1.</span> <span class="nav-text">实现原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%89%B9%E5%BE%81"><span class="nav-number">8.1.2.2.</span> <span class="nav-text">特征</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-7"><span class="nav-number">8.1.2.3.</span> <span class="nav-text">示例代码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8"><span class="nav-number">8.1.2.4.</span> <span class="nav-text">实际应用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86-2"><span class="nav-number">8.1.3.</span> <span class="nav-text">动态代理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%95%E8%A8%80"><span class="nav-number">8.1.3.1.</span> <span class="nav-text">引言</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86-2"><span class="nav-number">8.1.3.2.</span> <span class="nav-text">实现原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-8"><span class="nav-number">8.1.3.3.</span> <span class="nav-text">示例代码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AOP%E5%8E%9F%E7%90%86%E6%A6%82%E8%BF%B0"><span class="nav-number">8.1.4.</span> <span class="nav-text">AOP原理概述</span></a></li></ol></li></ol></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/dark-light-toggle.js"></script>



    
<script src="/js/local-search.js"></script>




    
<script src="/js/code-copy.js"></script>




    
<script src="/js/lazyload.js"></script>



<div class="post-scripts">
    
        
<script src="/js/left-side-toggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/toc.js"></script>

    
</div>



</body>
</html>
